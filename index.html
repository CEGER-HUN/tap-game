<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tap Game</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
<style>
body { margin:0; background:black; }
canvas { display:block; margin:auto; }
</style>
</head>
<body>

<script>
const WIDTH = 960;
const HEIGHT = 540;
const SPEED = 1.2;

let working = false;
let bg1, bg2;
let bgIndex = 1;
const TOTAL_BG = 5;

const config = {
  type: Phaser.AUTO,
  width: WIDTH,
  height: HEIGHT,
  scene: { preload, create, update }
};

new Phaser.Game(config);

function preload() {
  for (let i = 1; i <= 5; i++) {
    this.load.image("bg" + i, "./assets/bg" + i + ".png");
  }

  for (let i = 1; i <= 5; i++) {
    this.load.image("w" + i, "./assets/wagon" + i + ".png");
  }
}

function create() {
  bg1 = this.add.image(0, HEIGHT/2, "bg1").setOrigin(0,0.5);
  bg2 = this.add.image(WIDTH, HEIGHT/2, "bg2").setOrigin(0,0.5);

  const wagon = this.add.sprite(WIDTH/2, 400, "w1");

  this.anims.create({
    key: "move",
    frames: [
      {key:"w1"},{key:"w2"},{key:"w3"},{key:"w4"},{key:"w5"}
    ],
    frameRate: 8,
    repeat: -1
  });

  wagon.play("move");

  const startBtn = this.add.text(WIDTH/2, 60, "START", {
    fontSize: "48px",
    backgroundColor: "#000",
    padding: {x:20,y:10}
  }).setOrigin(0.5).setInteractive();

  startBtn.on("pointerdown", () => {
    working = !working;
    startBtn.setText(working ? "WORKING..." : "START");
  });
}

function update() {
  if (!working) return;

  bg1.x -= SPEED;
  bg2.x -= SPEED;

  if (bg1.x <= -WIDTH) resetBG(bg1);
  if (bg2.x <= -WIDTH) resetBG(bg2);
}

function resetBG(bg) {
  bgIndex++;
  if (bgIndex > TOTAL_BG) bgIndex = 1;

  bg.setTexture("bg" + bgIndex);
  bg.x = WIDTH;
}
</script>

</body>
</html>
