<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mining Game</title>

<script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>

<style>
body {
    margin: 0;
    background: black;
}
canvas {
    display: block;
    margin: auto;
}
</style>
</head>
<body>

<script>
const WORK_TIME = 10800000; // 3 saat (test için istersen 10000 yap → 10 saniye)

let wagon;
let working = false;
let startTime = 0;
let buttonText;

const config = {
    type: Phaser.AUTO,
    width: 960,
    height: 540,
    scene: { preload, create, update }
};

new Phaser.Game(config);

function preload() {
    this.load.image('bg', 'assets/background.png');
    this.load.image('w1', 'assets/wagon1.png');
    this.load.image('w2', 'assets/wagon2.png');
    this.load.image('w3', 'assets/wagon3.png');
    this.load.image('w4', 'assets/wagon4.png');
    this.load.image('w5', 'assets/wagon5.png');
}

function create() {
    this.add.image(480, 270, 'bg');

    wagon = this.add.sprite(480, 360, 'w1');

    this.anims.create({
        key: 'move',
        frames: [
            { key: 'w1' },
            { key: 'w2' },
            { key: 'w3' },
            { key: 'w4' },
            { key: 'w5' }
        ],
        frameRate: 8,
        repeat: -1
    });

    buttonText = this.add.text(480, 100, "START", {
        fontSize: "48px",
        color: "#00ff00",
        backgroundColor: "#000",
        padding: { x: 20, y: 10 }
    }).setOrigin(0.5).setInteractive();

    buttonText.on("pointerdown", () => {
        if (!working) startGame();
    });
}

function update() {
    if (!working) return;

    const elapsed = Date.now() - startTime;

    if (elapsed >= WORK_TIME) {
        stopGame();
    }
}

function startGame() {
    working = true;
    startTime = Date.now();
    wagon.play("move");
    buttonText.setText("WORKING...");
}

function stopGame() {
    working = false;
    wagon.stop();
    buttonText.setText("START");
}
</script>

</body>
</html>
