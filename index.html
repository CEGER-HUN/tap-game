<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medieval Kingdom</title>
    <style>
        body { background: #2c3e50; color: white; font-family: sans-serif; text-align: center; margin: 0; padding-bottom: 50px; }
        .resources { display: flex; justify-content: space-around; background: #34495e; padding: 15px; position: sticky; top: 0; z-index: 100; border-bottom: 3px solid #f1c40f; }
        .resource-item { font-size: 14px; font-weight: bold; }
        .building-container { display: grid; grid-template-columns: 1fr; gap: 20px; padding: 20px; }
        .building-card { background: rgba(52, 73, 94, 0.8); padding: 15px; border-radius: 15px; border: 2px solid #95a5a6; display: flex; flex-direction: column; align-items: center; }
        .building-img { width: 150px; height: 120px; object-fit: contain; margin: 10px 0; }
        button { background: #27ae60; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; width: 80%; font-weight: bold; transition: 0.3s; }
        button:active { transform: scale(0.95); }
        button:disabled { background: #7f8c8d; }
        h3 { margin: 5px 0; color: #f1c40f; }
    </style>
</head>
<body>

    <div class="resources">
        <div class="resource-item">ðŸªµ <span id="wood">0</span><br><small>+<span id="w-rate">0</span>/s</small></div>
        <div class="resource-item">ðŸŒ¾ <span id="food">0</span><br><small>+<span id="f-rate">0</span>/s</small></div>
        <div class="resource-item">ðŸª¨ <span id="stone">0</span><br><small>+<span id="s-rate">0</span>/s</small></div>
        <div class="resource-item">ðŸ’° <span id="gold">50</span></div>
    </div>

    <div class="building-container">
        <div class="building-card">
            <h3>Ana Bina (Lvl <span id="lvl-main">1</span>)</h3>
            <img src="images/ana-bina.png" class="building-img">
            <button onclick="upgrade('main')">GeliÅŸtir (<span id="cost-main">500</span> Odun)</button>
        </div>

        <div class="building-card">
            <h3>Odun KampÄ± (Lvl <span id="lvl-wood">0</span>)</h3>
            <img src="images/odun-kampi.png" class="building-img">
            <button onclick="upgrade('wood')">GeliÅŸtir (<span id="cost-wood">100</span> Odun)</button>
        </div>

        <div class="building-card">
            <h3>Tarla (Lvl <span id="lvl-food">0</span>)</h3>
            <img src="images/tarla.png" class="building-img">
            <button onclick="upgrade('food')">GeliÅŸtir (<span id="cost-food">100</span> BuÄŸday)</button>
        </div>

        <div class="building-card">
            <h3>TaÅŸ OcaÄŸÄ± (Lvl <span id="lvl-stone">0</span>)</h3>
            <img src="images/taÅŸ-ocaÄŸÄ±.png" class="building-img">
            <button onclick="upgrade('stone')">GeliÅŸtir (<span id="cost-stone">100</span> TaÅŸ)</button>
        </div>
    </div>

    <script>
        // HAFIZA SÄ°STEMÄ°: Ã–nce tarayÄ±cÄ±da kayÄ±t var mÄ± bak, yoksa baÅŸlangÄ±Ã§ deÄŸerlerini kullan.
        let savedData = JSON.parse(localStorage.getItem('myKingdomData'));

        let game = savedData || {
            res: { wood: 1000, food: 2000, stone: 500, gold: 50 },
            lvls: { main: 1, wood: 0, food: 0, stone: 0 },
            costs: { main: 500, wood: 100, food: 100, stone: 100 }
        };

        // Verileri Kaydetme Fonksiyonu
        function save() {
            localStorage.setItem('myKingdomData', JSON.stringify(game));
        }

        // Kaynak Ãœretim DÃ¶ngÃ¼sÃ¼
        setInterval(() => {
            game.res.wood += game.lvls.wood * 1;
            game.res.food += game.lvls.food * 2;
            game.res.stone += game.lvls.stone * 0.5;
            updateUI();
            save(); // Her saniye otomatik kaydet
        }, 1000);

        function upgrade(type) {
            let cost = game.costs[type];
            let resType = (type === 'main') ? 'wood' : type;

            if (game.res[resType] >= cost) {
                game.res[resType] -= cost;
                game.lvls[type]++;
                game.costs[type] = Math.floor(game.costs[type] * 1.6);
                updateUI();
                save();
            } else {
                alert("Yeterli kaynak yok!");
            }
        }

        function updateUI() {
            document.getElementById('wood').innerText = Math.floor(game.res.wood);
            document.getElementById('food').innerText = Math.floor(game.res.food);
            document.getElementById('stone').innerText = Math.floor(game.res.stone);
            document.getElementById('gold').innerText = game.res.gold;

            document.getElementById('w-rate').innerText = game.lvls.wood * 1;
            document.getElementById('f-rate').innerText = game.lvls.food * 2;
            document.getElementById('s-rate').innerText = game.lvls.stone * 0.5;

            for (let b in game.lvls) {
                if(document.getElementById('lvl-'+b)) {
                    document.getElementById('lvl-'+b).innerText = game.lvls[b];
                    document.getElementById('cost-'+b).innerText = game.costs[b];
                }
            }
        }
        updateUI();
    </script>
</body>
</html>
