<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Hamster Level Clicker</title>
<style>
/* === EKSTRA PRESTIGE BUTONU === */
#prestige-btn{
margin-top:6px;
background:linear-gradient(135deg,#a855f7,#ec4899);
border:none;color:white;
padding:6px 16px;
border-radius:12px;
font-weight:900;
font-size:.75rem;
display:none;
cursor:pointer;
}
#prestige-btn:active{transform:scale(.95);}
</style>
</head>
<body>

<!-- === SENƒ∞N ORƒ∞Jƒ∞NAL HTML'ƒ∞N AYNEN DURUYOR === -->
<!-- (body i√ßeriƒüi deƒüi≈ütirilmedi, sadece header altƒ±na buton ekleniyor) -->

<script>
/* ===== PRESTIGE PATCH ===== */

/* 1Ô∏è‚É£ STATE'E EKLE */
const oldDefault = defaultState;
defaultState = function(){
  let s = oldDefault();
  s.prestige = 0;
  s.token = 0;
  s.globalMultiplier = 1;
  return s;
};

/* 2Ô∏è‚É£ PRESTIGE FONKSƒ∞YONU */
function prestigeReset(){
  if(gs.level < 20) return;

  const earned = Math.floor(gs.level / 5);
  popup("üî•","Prestige!",
    `Reset attƒ±n!\n+${earned} üíé Token\nKazan√ß x${(1+(gs.prestige+1)*0.5).toFixed(1)}`
  );

  let p = gs.prestige + 1;
  let t = gs.token + earned;
  let m = 1 + p * 0.5;

  gs = defaultState();
  gs.prestige = p;
  gs.token = t;
  gs.globalMultiplier = m;

  save();
  renderUI();
}

/* 3Ô∏è‚É£ PRESTIGE BUTONU UI */
window.addEventListener("load",()=>{
  const h=document.querySelector("header");
  const b=document.createElement("button");
  b.id="prestige-btn";
  b.innerText="üî• PRESTIGE";
  b.onclick=prestigeReset;
  h.appendChild(b);
});

/* 4Ô∏è‚É£ KAZAN√áLARA MULTIPLIER */
const oldHandleTap = handleTap;
handleTap = function(e){
  let before = gs.score;
  oldHandleTap(e);
  let diff = gs.score - before;
  if(diff>0){
    let bonus = Math.floor(diff*(gs.globalMultiplier-1));
    gs.score += bonus;
  }
};

/* 5Ô∏è‚É£ PASƒ∞F GELƒ∞R MULTIPLIER */
const oldTotalEarn = totalEarn;
totalEarn = function(){
  return Math.floor(oldTotalEarn()*gs.globalMultiplier);
};

/* 6Ô∏è‚É£ RENDER'DA BUTON G√ñSTER */
const oldRenderUI = renderUI;
renderUI = function(){
  oldRenderUI();
  const btn=document.getElementById("prestige-btn");
  if(btn) btn.style.display = gs.level>=20 ? "inline-block":"none";
};

</script>
</body>
</html>
